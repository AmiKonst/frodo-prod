{"version":3,"file":"Artist-DLbTSFfK.js","sources":["../../src/components/ui/ArtistPreviewCard.vue","../../src/pages/Artists/Artist.vue"],"sourcesContent":["<template>\r\n    <div class=\"artist-preview-card\" v-if=\"props.artist?.id\" @click=\"open\">\r\n        <Img v-if=\"props.artist?.profileImage\"\r\n            :preview=\"props.artist?.profileImage?.resized\"\r\n            :original=\"props.artist?.profileImage?.original\"\r\n            :alt=\"props.artist.name\"\r\n        />\r\n\r\n        <div class=\"box\">\r\n            <p v-if=\"props.artist.description\">{{ props.artist.description }}</p>\r\n\r\n            <label class=\"title\">{{ t('modals.artist-kebab.about') }}</label>\r\n            <Button class=\"tertiary link size-s\" :name=\"t('common.more')\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { useI18n } from 'vue-i18n';\r\n    import Button from 'ðŸ”—/components/ui/Button.vue';\r\n    import Img from 'ðŸ”—/components/ui/Img.vue';\r\n    import stores from '@/stores';\r\n\r\n    const modals = stores.modals();\r\n\r\n    const { t } = useI18n();\r\n\r\n    const props = defineProps({\r\n        artist: { type: Object, default: () => ({}) }\r\n    });\r\n\r\n    const open = () => {\r\n        modals.open('artist', { quietClose: true, data: { code: props.artist.code } })\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .artist-preview-card {\r\n        position: relative;\r\n        width: 100%;\r\n        aspect-ratio: 16 / 9;\r\n        border-radius: 12px;\r\n        overflow: hidden;\r\n\r\n        img {\r\n            object-fit: cover;\r\n            position: absolute;\r\n            left: 0;\r\n            right: 0;\r\n            top: 0;\r\n            bottom: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            filter: blur(6px);\r\n            border-radius: 12px;\r\n        }\r\n\r\n        &:after {\r\n            content: \"\";\r\n            position: absolute;\r\n            inset: 0;\r\n            pointer-events: none;\r\n            background: linear-gradient(165deg, var(--white-5) 0%, var(--white-90) 80%);\r\n        }\r\n\r\n        .box {\r\n            position: absolute;\r\n            z-index: 1;\r\n            inset: 0;\r\n            display: flex;\r\n            flex-direction: column;\r\n            padding: 20px;\r\n            gap: 4px;\r\n            align-items: start;\r\n\r\n            p {\r\n                margin: 0 0 auto;\r\n                padding: 0;\r\n                display: -webkit-box;\r\n                -webkit-line-clamp: 4;\r\n                -webkit-box-orient: vertical;\r\n                overflow: hidden;\r\n                text-overflow: ellipsis;\r\n                max-height: 108px;\r\n                font: var(--font-body-1);\r\n                color: var(--dark-500);\r\n                white-space: pre-wrap;\r\n            }\r\n\r\n            .title {\r\n                font: var(--font-h7);\r\n                color: var(--dark-500);\r\n            }\r\n\r\n            button {\r\n            }\r\n        }\r\n    }\r\n</style>\r\n","<template>\r\n    <ItemDetail :previewHeight=\"420\" v-if=\"data.ready\">\r\n        <template v-slot:background>\r\n            <Img\r\n                v-if=\"data.item?.profileImage\"\r\n                :preview=\"data.item?.profileImage?.crop\"\r\n                :original=\"data.item?.profileImage?.original\"\r\n                :alt=\"data.item.name\"\r\n                :skeleton=\"true\"\r\n            />\r\n        </template>\r\n        <template v-slot:preview>\r\n            <div class=\"name\"\r\n                v-if=\"data.item?.name\"\r\n                @click=\"openArtist\"\r\n            >{{ data.item.name }}</div>\r\n\r\n            <div class=\"buttons\">\r\n                <Button :name=\"t('player.shuffle')\" class=\"tertiary active size-m\" icon=\"random\"/>\r\n                <Button :name=\"t('player.play')\" class=\"size-m\" icon=\"play\"/>\r\n            </div>\r\n        </template>\r\n        <template v-slot:toolbar>\r\n            <IconButton\r\n                icon=\"heart\"\r\n                class=\"tertiary size-xl\"\r\n                :class=\"{ invert: others.theme !== 'dark' }\"\r\n                @click=\"like\"\r\n            />\r\n\r\n            <IconButton\r\n                icon=\"tg-stars\"\r\n                class=\"tertiary size-xl\"\r\n                @click=\"like\"\r\n            />\r\n\r\n            <IconButton\r\n                icon=\"apps\"\r\n                class=\"tertiary size-l\"\r\n                :class=\"{ invert: others.theme !== 'dark' }\"\r\n                @click=\"openKebab\"\r\n            />\r\n        </template>\r\n        <template v-slot:detail>\r\n            <Releases\r\n                v-if=\"data.item?.id\"\r\n                :take=\"1\"\r\n                :skeletonCount=\"1\"\r\n                :params=\"{\r\n                    contributors: data.item.id,\r\n                    releaseDate_lte: moment().toISOString(),\r\n                    releaseDate_gte: moment().subtract(1, 'year').toISOString()\r\n                }\"\r\n                :loadMore=\"false\"\r\n                :sort=\"{\r\n                    code: 'releaseDate',\r\n                    direction: 'desc'\r\n                }\"\r\n                title=\"blocks.releases.new-release\"\r\n                @change=\"openRelease\"\r\n            />\r\n\r\n\r\n            <Tracks\r\n                v-if=\"data.item?.id\"\r\n                type=\"row\"\r\n                :take=\"12\"\r\n                :params=\"{\r\n                    contributors: data.item.id\r\n                }\"\r\n                :sort=\"{\r\n                    code: 'ratingTotal',\r\n                    direction: 'desc'\r\n                }\"\r\n                :buttons=\"[{ name: 'blocks.tracks.all', page: 'artist-tracks', params: { code: data.item.code } }]\"\r\n                title=\"blocks.tracks.popular-tracks\"\r\n            />\r\n            \r\n\r\n            <Releases\r\n                v-if=\"data.item?.id\"\r\n                type=\"row\"\r\n                :take=\"8\"\r\n                :skeletonCount=\"8\"\r\n                :params=\"{\r\n                    contributors: data.item.id\r\n                }\"\r\n                :sort=\"{\r\n                    code: 'releaseDate',\r\n                    direction: 'desc'\r\n                }\"\r\n                :buttons=\"[{ name: 'blocks.releases.all', page: 'artist-releases', params: { code: data.item.code } }]\"\r\n                title=\"blocks.releases.latest-releases\"\r\n                handler=\"release\"\r\n            />\r\n\r\n\r\n            <ArtistPreviewCard :artist=\"data.item\" v-if=\"data.item?.id\" />\r\n        </template>\r\n    </ItemDetail>\r\n\r\n    <Ready :page=\"`artist-${props.code}`\" :init=\"init\" />\r\n</template>\r\n\r\n<script setup>\r\n    import { onMounted, onBeforeUnmount, reactive } from 'vue';\r\n    import api from 'ðŸ”—/api';\r\n    import stores from '@/stores';\r\n    import Ready from 'ðŸ”—/components/ui/Ready.vue';\r\n    import Img from 'ðŸ”—/components/ui/Img.vue';\r\n    import Button from 'ðŸ”—/components/ui/Button.vue';\r\n    import ItemDetail from 'ðŸ”—/components/ui/ItemDetail.vue';\r\n    import ArtistPreviewCard from '@/components/ui/ArtistPreviewCard.vue';\r\n    import IconButton from 'ðŸ”—/components/ui/IconButton.vue';\r\n\r\n    import Releases from 'ðŸ”—/components/blocks/Releases.vue';\r\n    import Tracks from 'ðŸ”—/components/blocks/Tracks.vue';\r\n    import { useI18n } from 'vue-i18n';\r\n    import moment from 'moment';\r\n    import { message } from 'ðŸ”—/utils/utils';\r\n\r\n    const { t } = useI18n();\r\n\r\n    const locale = stores.locale();\r\n    const nav = stores.nav();\r\n    const tg = stores.tg();\r\n    const modals = stores.modals();\r\n    const others = stores.others();\r\n\r\n    const props = defineProps({\r\n        code: { type: String }\r\n    });\r\n\r\n    const data = reactive({\r\n        ready: false,\r\n        item: null\r\n    });\r\n\r\n    const like = (e) => {\r\n        let button = e?.target?.closest('button');\r\n\r\n        if (button) {\r\n            button.classList.remove('dunk');\r\n            setTimeout(() => {\r\n                button.classList.add('dunk');\r\n            }, 10);\r\n        }\r\n\r\n        message.info(t('common.soon'))\r\n    }\r\n\r\n    const openKebab = () => {\r\n        modals.open('artist-kebab', { quietClose: true, data: { code: props.code } })\r\n    }\r\n\r\n    const init = async () => {\r\n        data.item = await api.artists().getByCode(props.code);\r\n        data.ready = true;\r\n    }\r\n\r\n    const openRelease = (item) => {\r\n        if (!item?.id) {\r\n            return;\r\n        }\r\n\r\n        nav.open('release', { id: item?.id });\r\n    }\r\n\r\n    const openArtist = () => {\r\n        modals.open('artist', { quietClose: true, data: { code: props.code } })\r\n    }\r\n\r\n    const openArtistKebab = () => {\r\n        modals.open('artist-kebab', { quietClose: true, data: { code: props.code } })\r\n    }\r\n\r\n    onMounted(async () => {\r\n        tg.showBackButton();\r\n        tg.showSettingsButton(openArtistKebab);\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n        tg.hideSettingsButton(openArtistKebab);\r\n        tg.hideBackButton();\r\n    });\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n    .name {\r\n        font: var(--font-h4);\r\n        color: white; //var(--white-500);\r\n        font-weight: bold;\r\n        text-align: center;\r\n        -webkit-text-stroke: 1px rgb(0, 0, 0, .2);\r\n    }\r\n\r\n    .buttons {\r\n        min-height: 38px;\r\n        display: flex;\r\n        flex-direction: row;\r\n        gap: 8px;\r\n        align-items: center;\r\n        justify-content: center;\r\n\r\n        button {\r\n            // min-width: 132px;\r\n        }\r\n    }\r\n</style>"],"names":[],"mappings":"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"}