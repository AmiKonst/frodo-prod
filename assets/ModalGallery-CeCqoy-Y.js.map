{"version":3,"file":"ModalGallery-CeCqoy-Y.js","sources":["../../shared/components/modals/ModalGallery.vue"],"sourcesContent":["<template>\r\n    <BaseModal\r\n        :name=\"props.name\"\r\n        :full=\"true\"\r\n        :mobileMode=\"true\"\r\n        :closeOutside=\"true\"\r\n    >\r\n        <template #content>\r\n            <div class=\"gallery-wrapper\">\r\n\r\n                <!-- Ð¡Ð»Ð°Ð¹Ð´ÐµÑ€ -->\r\n                <div\r\n                    class=\"slides\"\r\n                    :style=\"{ transform: `translateX(${-currentIndex * 100 + slideOffset}px)` }\"\r\n                    v-touch:swipe.left=\"next\"\r\n                    v-touch:swipe.right=\"prev\"\r\n                >\r\n\r\n                    <!-- ÐšÐ°Ð¶Ð´Ñ‹Ð¹ ÑÐ»Ð°Ð¹Ð´ -->\r\n                    <div\r\n                        class=\"slide\"\r\n                        v-for=\"(img, index) in data.imgs\"\r\n                        :key=\"index\"\r\n                    >\r\n                            <!-- v-touch:swipe.down=\"close\" -->\r\n                        <div\r\n                            class=\"zoom-container\"\r\n                            ref=\"zoomArea\"\r\n                            v-touch:pinch=\"onPinch\"\r\n                            v-touch:pinch.stop\r\n                            v-touch:pan=\"onPan\"\r\n                            v-touch:pan.end=\"onPanEnd\"\r\n                            :style=\"{\r\n                                transform: `translate(${position.x}px, ${position.y}px) scale(${scale})`\r\n                            }\"\r\n                        >\r\n                            <img :src=\"`${baseUrl}${img.original || img.resized}`\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </template>\r\n    </BaseModal>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, reactive, ref } from 'vue';\r\nimport BaseModal from 'ðŸ”—/components/modals/BaseModal.vue';\r\nimport stores from '@/stores';\r\n\r\nconst modals = stores.modals();\r\n\r\nconst props = defineProps({\r\n    name: { type: String, default: 'gallery' }\r\n});\r\n\r\n// ============= Ð¡Ð¢Ð•Ð™Ð¢ ==================\r\n\r\nconst data = reactive({\r\n    imgs: []\r\n});\r\n\r\nconst currentIndex = ref(0);\r\n\r\n// Ð”Ð»Ñ ÑÐ²Ð°Ð¹Ð¿Ð° ÑÐ»Ð°Ð¹Ð´Ð¾Ð²\r\nconst slideOffset = ref(0);\r\n\r\nconst baseUrl = import.meta.env.VITE_APP_FILES_URL;\r\n\r\n// Ð”Ð»Ñ Ð·ÑƒÐ¼Ð° Ð¸ Ð¿ÐµÑ€ÐµÐ¼ÐµÑ‰ÐµÐ½Ð¸Ñ\r\nconst scale = ref(1);\r\nconst baseScale = ref(1);\r\n\r\nconst position = reactive({\r\n    x: 0,\r\n    y: 0\r\n});\r\n\r\nconst basePos = { x: 0, y: 0 };\r\n\r\n// ============= ÐœÐ•Ð¢ÐžÐ”Ð« =================\r\n\r\nconst close = () => {\r\n    modals.close(props.name);\r\n};\r\n\r\n// ÐŸÐµÑ€ÐµÐ»Ð¸ÑÑ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ\r\nconst next = () => {\r\n    if (currentIndex.value < data.imgs.length - 1) {\r\n        currentIndex.value++;\r\n        resetZoom();\r\n    }\r\n};\r\nconst prev = () => {\r\n    if (currentIndex.value > 0) {\r\n        currentIndex.value--;\r\n        resetZoom();\r\n    }\r\n};\r\n\r\n// Pinch Zoom\r\nconst onPinch = (e) => {\r\n    scale.value = baseScale.value * e.scale;\r\n\r\n    if (scale.value < 1) scale.value = 1;\r\n    if (scale.value > 4) scale.value = 4;\r\n};\r\n\r\nconst onPan = (e) => {\r\n    if (scale.value === 1) return;\r\n    position.x = basePos.x + e.deltaX;\r\n    position.y = basePos.y + e.deltaY;\r\n};\r\n\r\nconst onPanEnd = () => {\r\n    basePos.x = position.x;\r\n    basePos.y = position.y;\r\n    baseScale.value = scale.value;\r\n};\r\n\r\n// Ð¡Ð±Ñ€Ð¾Ñ Ð¿Ñ€Ð¸ ÑÐ¼ÐµÐ½Ðµ Ñ„Ð¾Ñ‚Ð¾\r\nconst resetZoom = () => {\r\n    scale.value = 1;\r\n    baseScale.value = 1;\r\n    position.x = 0;\r\n    position.y = 0;\r\n    basePos.x = 0;\r\n    basePos.y = 0;\r\n};\r\n\r\n// ================== LOAD ==================\r\n\r\nonMounted(() => {\r\n    const payload = modals.getData(props.name);\r\n    if (payload?.imgs?.length) {\r\n        data.imgs = payload.imgs;\r\n    }\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n.gallery-wrapper {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n    min-height: 80vh;\r\n}\r\n\r\n.slides {\r\n    display: flex;\r\n    width: 100%;\r\n    height: 100%;\r\n    transition: transform 0.25s ease;\r\n    min-height: 80vh;\r\n}\r\n\r\n.slide {\r\n    flex: 0 0 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    overflow: hidden;\r\n}\r\n\r\n.zoom-container {\r\n    touch-action: none;\r\n    will-change: transform;\r\n    transition: transform 0.1s ease;\r\n}\r\n\r\n.zoom-container img {\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n    user-select: none;\r\n    pointer-events: none;\r\n}\r\n\r\n</style>\r\n"],"names":[],"mappings":";;;;;;;;;;AAmDA,IAAA,MAAM,MAAA,GAAS,OAAO,MAAA,EAAO;AAE7B,IAAA,MAAM,KAAA,GAAQ,OAAA;AAMd,IAAA,MAAM,OAAO,QAAA,CAAS;AAAA,MAClB,MAAM;AAAC,KACV,CAAA;AAED,IAAA,MAAM,YAAA,GAAe,IAAI,CAAC,CAAA;AAG1B,IAAA,MAAM,WAAA,GAAc,IAAI,CAAC,CAAA;AAEzB,IAAA,MAAM,OAAA,GAAU,mCAAA;AAGhB,IAAA,MAAM,KAAA,GAAQ,IAAI,CAAC,CAAA;AACnB,IAAA,MAAM,SAAA,GAAY,IAAI,CAAC,CAAA;AAEvB,IAAA,MAAM,WAAW,QAAA,CAAS;AAAA,MACtB,CAAA,EAAG,CAAA;AAAA,MACH,CAAA,EAAG;AAAA,KACN,CAAA;AAED,IAAA,MAAM,OAAA,GAAU,EAAE,CAAA,EAAG,CAAA,EAAG,GAAG,CAAA,EAAE;AAS7B,IAAA,MAAM,OAAO,MAAM;AACf,MAAA,IAAI,YAAA,CAAa,KAAA,GAAQ,IAAA,CAAK,IAAA,CAAK,SAAS,CAAA,EAAG;AAC3C,QAAA,YAAA,CAAa,KAAA,EAAA;AACb,QAAA,SAAA,EAAU;AAAA,MACd;AAAA,IACJ,CAAA;AACA,IAAA,MAAM,OAAO,MAAM;AACf,MAAA,IAAI,YAAA,CAAa,QAAQ,CAAA,EAAG;AACxB,QAAA,YAAA,CAAa,KAAA,EAAA;AACb,QAAA,SAAA,EAAU;AAAA,MACd;AAAA,IACJ,CAAA;AAGA,IAAA,MAAM,OAAA,GAAU,CAAC,CAAA,KAAM;AACnB,MAAA,KAAA,CAAM,KAAA,GAAQ,SAAA,CAAU,KAAA,GAAQ,CAAA,CAAE,KAAA;AAElC,MAAA,IAAI,KAAA,CAAM,KAAA,GAAQ,CAAA,EAAG,KAAA,CAAM,KAAA,GAAQ,CAAA;AACnC,MAAA,IAAI,KAAA,CAAM,KAAA,GAAQ,CAAA,EAAG,KAAA,CAAM,KAAA,GAAQ,CAAA;AAAA,IACvC,CAAA;AAEA,IAAA,MAAM,KAAA,GAAQ,CAAC,CAAA,KAAM;AACjB,MAAA,IAAI,KAAA,CAAM,UAAU,CAAA,EAAG;AACvB,MAAA,QAAA,CAAS,CAAA,GAAI,OAAA,CAAQ,CAAA,GAAI,CAAA,CAAE,MAAA;AAC3B,MAAA,QAAA,CAAS,CAAA,GAAI,OAAA,CAAQ,CAAA,GAAI,CAAA,CAAE,MAAA;AAAA,IAC/B,CAAA;AAEA,IAAA,MAAM,WAAW,MAAM;AACnB,MAAA,OAAA,CAAQ,IAAI,QAAA,CAAS,CAAA;AACrB,MAAA,OAAA,CAAQ,IAAI,QAAA,CAAS,CAAA;AACrB,MAAA,SAAA,CAAU,QAAQ,KAAA,CAAM,KAAA;AAAA,IAC5B,CAAA;AAGA,IAAA,MAAM,YAAY,MAAM;AACpB,MAAA,KAAA,CAAM,KAAA,GAAQ,CAAA;AACd,MAAA,SAAA,CAAU,KAAA,GAAQ,CAAA;AAClB,MAAA,QAAA,CAAS,CAAA,GAAI,CAAA;AACb,MAAA,QAAA,CAAS,CAAA,GAAI,CAAA;AACb,MAAA,OAAA,CAAQ,CAAA,GAAI,CAAA;AACZ,MAAA,OAAA,CAAQ,CAAA,GAAI,CAAA;AAAA,IAChB,CAAA;AAIA,IAAA,SAAA,CAAU,MAAM;AACZ,MAAA,MAAM,OAAA,GAAU,MAAA,CAAO,OAAA,CAAQ,KAAA,CAAM,IAAI,CAAA;AACzC,MAAA,IAAI,OAAA,EAAS,MAAM,MAAA,EAAQ;AACvB,QAAA,IAAA,CAAK,OAAO,OAAA,CAAQ,IAAA;AAAA,MACxB;AAAA,IACJ,CAAC,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}