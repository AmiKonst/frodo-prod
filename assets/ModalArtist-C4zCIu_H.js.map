{"version":3,"file":"ModalArtist-C4zCIu_H.js","sources":["../../src/components/modals/ModalArtist.vue"],"sourcesContent":["<template>\r\n    <BaseModal\r\n        name=\"artist\"\r\n        :mobileMode=\"true\"\r\n        :closeOutside=\"true\"\r\n        :secondary=\"true\"\r\n        :isLoading=\"data.loading\"\r\n    >\r\n        <template v-slot:title>\r\n            <span>{{ data.item?.name }}</span>\r\n        </template>\r\n        <template v-slot:content>\r\n            <div class=\"box\" v-if=\"data.item\">\r\n                <div class=\"gallery\">\r\n                    <Img\r\n                        v-if=\"data.item?.profileImage\"\r\n                        :preview=\"data.item?.profileImage?.crop\"\r\n                        :original=\"data.item?.profileImage?.original\"\r\n                        :alt=\"data.item.name\"\r\n                        aspectRatio=\"1 / 1\"\r\n                        :skeleton=\"true\"\r\n                        @click=\"openGallery\"\r\n                    />\r\n\r\n                    <div class=\"buttons\">\r\n                        <IconButton icon=\"share\" class=\"secondary size-m\"\r\n                            @click=\"share.artist(data.item)\"\r\n                        />\r\n                        <Button icon=\"tg-stars\" class=\"secondary size-m\"\r\n                            :name=\"t('common.support')\"\r\n                            @click=\"donate\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div class=\"description\" v-if=\"data.item.description\">\r\n                    {{ data.item.description }}\r\n                </div>\r\n\r\n\r\n                <div class=\"links\" v-if=\"data.item.links?.length\">\r\n                    <TitleWithButtons\r\n                        :title=\"'modals.artist.official-pages'\"\r\n                    />\r\n\r\n                    <ul>\r\n                        <li v-for=\"item in data.item.links\" :key=\"item.code\" @click=\"openLink(item)\">\r\n                            <Icon :icon=\"item.code && knownSites.get(item.code) ? item.code : 'link'\" />\r\n\r\n                            <div>\r\n                                <span v-if=\"item.code && knownSites.get(item.code)\"\r\n                                    class=\"name\"\r\n                                >\r\n                                    {{ t(`known-sites.${item.code}`) }}\r\n                                </span>\r\n                                <span v-else class=\"name\" >\r\n                                    {{ getDomainCode(item.url) }}\r\n                                </span>\r\n\r\n                                <span class=\"url\">{{ item.url }}</span>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div class=\"commercial\">\r\n                    <TitleWithButtons\r\n                        :title=\"'modals.artist.commercial-inquiries'\"\r\n                    />\r\n\r\n\r\n                    <Button\r\n                        v-if=\"data.email !== null\"\r\n                        :name=\"data.email || t('modals.artist.get-email')\"\r\n                        class=\"size-s\"\r\n                        :class=\"{ secondary: !data.gettingEmail }\"\r\n                        :loading=\"data.gettingEmail\"\r\n                        @click=\"getEmail\"\r\n                    />\r\n                    <label v-else>\r\n                        {{ t('modals.artist.no-email') }}\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </template>\r\n    </BaseModal>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, reactive } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nimport IconButton from 'ðŸ”—/components/ui/IconButton.vue';\r\nimport Button from 'ðŸ”—/components/ui/Button.vue';\r\nimport Img from 'ðŸ”—/components/ui/Img.vue';\r\nimport BaseModal from 'ðŸ”—/components/modals/BaseModal.vue';\r\nimport stores from '@/stores';\r\nimport TitleWithButtons from '@/components/ui/TitleWithButtons.vue';\r\n\r\nimport api from 'ðŸ”—/api';\r\nimport { knownSites, copyText, message, getDomainCode } from 'ðŸ”—/utils/utils';\r\n\r\nconst { t } = useI18n();\r\n\r\nconst tg = stores.tg();\r\nconst modals = stores.modals();\r\nconst share = stores.share();\r\n\r\nconst data = reactive({\r\n    loading: true\r\n});\r\n\r\n\r\nconst copyEmail = () => {\r\n    if (data.email) {\r\n        copyText(data.email);\r\n        message.success(t('modals.artist.email-copied'));\r\n    };\r\n}\r\n\r\nconst getEmail = async () => {\r\n    if (data.email) {\r\n        copyEmail();\r\n        return;\r\n    }\r\n\r\n    if (!data.item?.id) {\r\n        return;\r\n    }\r\n\r\n    data.gettingEmail = true;\r\n\r\n    const payload = await api.artists().getCommertialInfo(data.item.id);\r\n\r\n    data.gettingEmail = false;\r\n    data.email = payload?.email;\r\n\r\n    copyEmail();\r\n}\r\n\r\n\r\nconst openGallery = () => {\r\n    if (!data.item?.id || !data.item?.profileImage?.original) {\r\n        return;\r\n    }\r\n\r\n    modals.open('gallery', { data: { imgs: [{\r\n        title: data.item.name,\r\n        ...data.item?.profileImage\r\n    }] } });\r\n}\r\n\r\nconst donate = () => {\r\n    message.info(t('common.soon'));\r\n}\r\n\r\nconst close = () => {\r\n    modals.close('artist');\r\n};\r\n\r\nconst openLink = (item) => {\r\n    if (!item?.url) {\r\n        return\r\n    }\r\n\r\n    if (item.code === 'telegram') {\r\n        tg.openLink({\r\n            external_url: item.url,\r\n            type: 'telegram'\r\n        });\r\n    } else {\r\n        tg.openLink({\r\n            external_url: item.url\r\n        });\r\n    }\r\n}\r\n\r\nonMounted(async () => {\r\n    const payload = modals.getData('artist');\r\n\r\n    if (!payload?.code) {\r\n        close();\r\n        return;\r\n    }\r\n\r\n    if (payload.item) {\r\n        data.item = payload.item;\r\n    } else  {\r\n        data.item = await api.artists().getByCode(payload.code);\r\n    }\r\n\r\n    data.loading = false;\r\n});\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .box {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 32px;\r\n        padding: var(--block-gap) 0;\r\n\r\n        .gallery {\r\n            position: relative;\r\n            .buttons {\r\n                position: absolute;\r\n                right: 16px;\r\n                bottom: 16px;\r\n                display: flex;\r\n                flex-direction: row;\r\n                gap: 8px;\r\n            }\r\n        }\r\n\r\n        .description {\r\n            font: var(--font-body-2);\r\n            color: var(--dark-500);\r\n            white-space: pre-wrap;\r\n        }\r\n\r\n        .commercial {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: start;\r\n            gap: var(--block-gap);\r\n\r\n            label {\r\n                font: var(--font-body-2);\r\n                color: var(--dark-500);\r\n                white-space: pre-wrap;\r\n            }\r\n        }\r\n\r\n        .links {\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: var(--block-gap);\r\n\r\n            ul {\r\n                list-style: none;\r\n                margin: 0;\r\n                padding: 0;\r\n                display: flex;\r\n                flex-direction: column;\r\n                li {\r\n                    cursor: pointer;\r\n                    display: flex;\r\n                    flex-direction: row;\r\n                    gap: 12px;\r\n                    align-items: center;\r\n                    padding: 8px 0;\r\n                    width: 100%;\r\n\r\n                    svg {\r\n                        width: 38px;\r\n                        height: 38px;\r\n                        fill: var(--dark-500);\r\n                        flex-shrink: 0;\r\n                    }\r\n\r\n                    div {\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        gap: 4px;\r\n\r\n                        .name {\r\n                            font: var(--font-body-1);\r\n                            color: var(--dark-500);\r\n                            white-space: nowrap;\r\n                            text-overflow: ellipsis;\r\n                            overflow: hidden;\r\n                            &::first-letter {\r\n                                text-transform: uppercase;\r\n                            }\r\n                        }\r\n\r\n                        .url {\r\n                            font: var(--font-caption);\r\n                            color: var(--gray-500);\r\n                            white-space: nowrap;\r\n                            overflow: hidden;\r\n                            text-overflow: ellipsis;\r\n                            direction: rtl;\r\n                            text-align: left;\r\n                            max-width: 200px;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</style>\r\n"],"names":[],"mappings":"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"}