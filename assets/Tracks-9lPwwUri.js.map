{"version":3,"file":"Tracks-9lPwwUri.js","sources":["../../shared/components/ui/ExtendedTrackPreview.vue","../../shared/components/blocks/Tracks.vue"],"sourcesContent":["<template>\r\n    <div class=\"extended-track-preview\">\r\n        <Collage :items=\"artists\"\r\n            :default=\"defaultProfileImage\"\r\n            :highQuality=\"true\"\r\n            :vinyl=\"!!state\"\r\n            :playing=\"state === 'playing'\"\r\n            borderRadius=\"160px\"\r\n        />\r\n\r\n        <div class=\"track-preview-box\">\r\n            <TrackPreview\r\n                :item=\"props.item\"\r\n                :light=\"props.light\"\r\n                :showKebab=\"props.showKebab\"\r\n                :externalPlay=\"props.externalPlay\"\r\n                :skeleton=\"props.skeleton\"\r\n                :playable=\"props.playable\"\r\n                :showLike=\"true\"\r\n                @play=\"emit('play', $event)\"\r\n                @color=\"emit('color', $event)\"\r\n                @change=\"emit('change', $event)\"\r\n            />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { computed } from 'vue';\r\n    import TrackPreview from 'ðŸ”—/components/ui/TrackPreview.vue';\r\n    import Collage from 'ðŸ”—/components/ui/Collage.vue';\r\n    import api from 'ðŸ”—/api';\r\n    import stores from '@/stores';\r\n\r\n    const player = stores.player();\r\n\r\n    const emit = defineEmits(['change', 'play', 'color']);\r\n\r\n    const props = defineProps({\r\n        item: { type: Object, default: () => ({}) },\r\n        skeleton: { type: Boolean, default: false },\r\n        playable: { type: Boolean, default: true },\r\n        light: { type: Boolean, default: false },\r\n        showKebab: { type: Boolean, default: false },\r\n        externalPlay: { type: Boolean, default: false }\r\n    });\r\n\r\n    const state = computed(() => {\r\n        if (!player.panes.default || player.panes.default._item?.id !== props.item?.id) {\r\n            return;\r\n        }\r\n\r\n        return player.panes.default._state;\r\n    });\r\n\r\n    const artists = computed(() => {\r\n        if (!props.item?.contributors?.length) {\r\n            return [];\r\n        }\r\n\r\n        return props.item.contributors.filter(item => item.role === 'PRIMARY' && item.state === 'CONFIRMED').map(item => item.artist.profileImage);\r\n    });\r\n\r\n    const defaultProfileImage = computed(() => {\r\n        return api.artists().defaultProfileImage;\r\n    });\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .extended-track-preview {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        overflow: hidden;\r\n        .collage {\r\n            width: 320px;\r\n            margin: 5px auto;\r\n        }\r\n\r\n        .track-preview-box {\r\n            padding: 8px;\r\n            width: 280px;\r\n            border-radius: 12px;\r\n            background: var(--gray-90);\r\n            margin-top: -66px;\r\n            z-index: 1;\r\n        }\r\n    }\r\n</style>","<template>\r\n    <Block code=\"tracks\"\r\n        v-bind=\"props\"\r\n        ref=\"block\"\r\n        @change=\"onClick\"\r\n        :id=\"player.panes?.default?._item?.id\"\r\n        :sliderPreudo=\"props.subtype === 'extended'\"\r\n        :sliderProps=\"props.subtype === 'extended' ? {\r\n            itemWidth: '342px',\r\n            colAlign: 'center',\r\n            colGap: '8px',\r\n            rowGap: '8px'\r\n        } : {\r\n            itemWidth: '90%',\r\n            colAlign: 'start',\r\n            colGap: '8px',\r\n            rowGap: '8px'\r\n        }\"\r\n        style=\"--slider-pseudo-width: calc(50% - 179px)\"\r\n    >\r\n        <template #list-item=\"{ item }\">\r\n            <ExtendedTrackPreview v-if=\"props.subtype === 'extended'\"\r\n                :item=\"item\"\r\n                :light=\"true\"\r\n                :externalPlay=\"true\"\r\n                :showKebab=\"props.showKebab\"\r\n                @play=\"onPlaying(item)\"\r\n            />\r\n\r\n            <TrackPreview v-else\r\n                :item=\"item\"\r\n                :light=\"true\"\r\n                :externalPlay=\"true\"\r\n                :showKebab=\"props.showKebab\"\r\n                @play=\"onPlaying(item)\"\r\n            />\r\n        </template>\r\n\r\n        <template #list-skeleton>\r\n            <ExtendedTrackPreview v-if=\"props.subtype === 'extended'\"\r\n                :skeleton=\"true\"\r\n                :playable=\"false\"\r\n                :light=\"true\"\r\n            />\r\n\r\n            <TrackPreview v-else\r\n                :skeleton=\"true\"\r\n                :playable=\"false\"\r\n                :light=\"true\"\r\n            />\r\n        </template>\r\n\r\n        <template #row-item=\"{ item }\">\r\n            <ExtendedTrackPreview v-if=\"props.subtype === 'extended'\"\r\n                :item=\"item\"\r\n                :light=\"true\"\r\n                :showKebab=\"props.showKebab\"\r\n                :externalPlay=\"true\"\r\n                @play=\"onPlaying(item)\"\r\n            />\r\n\r\n            <TrackPreview v-else\r\n                :item=\"item\"\r\n                :light=\"true\"\r\n                :showKebab=\"props.showKebab\"\r\n                :externalPlay=\"true\"\r\n                @play=\"onPlaying(item)\"\r\n            />\r\n        </template>\r\n\r\n        <template #row-skeleton>\r\n            <ExtendedTrackPreview v-if=\"props.subtype === 'extended'\"\r\n                :skeleton=\"true\"\r\n                :light=\"true\"\r\n            />\r\n\r\n            <TrackPreview v-else\r\n                :skeleton=\"true\"\r\n                :light=\"true\"\r\n            />\r\n        </template>\r\n    </Block>\r\n</template>\r\n\r\n<script setup>\r\n    import Block from 'ðŸ”—/components/blocks/Block.vue';\r\n\r\n    import { ref } from 'vue';\r\n    import TrackPreview from 'ðŸ”—/components/ui/TrackPreview.vue';\r\n    import ExtendedTrackPreview from 'ðŸ”—/components/ui/ExtendedTrackPreview.vue';\r\n    import stores from '@/stores';\r\n\r\n    const emit = defineEmits(['change']);\r\n\r\n    const nav = stores.nav();\r\n    const player = stores.player();\r\n\r\n    const block = ref(null);\r\n\r\n    const props = defineProps({\r\n        empty: { type: Object, default: () => ({}) },\r\n        items: { type: Array, default: () => ([]) },\r\n        title: { type: [Object, String, null], default: null },\r\n        params: { type: Object, default: () => ({}) },\r\n        options: { type: Object, default: () => ({}) },\r\n        sort: { type: [Object, null], default: () => ({\r\n            code: 'name',\r\n            direction: 'asc'\r\n        }) },\r\n        loadMore: { type: Boolean, default: true },\r\n        showKebab: { type: Boolean, default: false },\r\n        skeleton: { type: Boolean, default: true },\r\n        skeletonCount: { type: Number, default: 6 },\r\n        itemsInCol: { type: Number, default: 3 },\r\n        take: { type: Number, default: 30 },\r\n        handler: { type: [String, null], default: () => null },\r\n        type: { type: String, default: 'list' },\r\n        source: { type: [Object, null], default: () => ({ store: 'tracks', fnName: 'list' }) },\r\n        buttons: { type: Array, default: () => ([]) },\r\n        subtype: { type: [String, null], default: null },\r\n        getById: { type: [String, null], default: null }\r\n    });\r\n\r\n    const reload = () => {\r\n        if (block?.value?.reload) {\r\n            block.value.reload();\r\n        }\r\n    };\r\n\r\n    const onClick = (item) => {\r\n        emit('change', item);\r\n\r\n        // if (props.handler === 'track' && item?.id) {\r\n        //     nav.open('track', { id: item?.id });\r\n        // }\r\n    }\r\n\r\n    const onPlaying = async (item) => {\r\n        const { items, total } = block.value.getState();\r\n\r\n        await player.tracks({\r\n            params: props.params,\r\n            sort: props.sort,\r\n            options: {\r\n                ...props.options,\r\n                source: props.source,\r\n                items: [...items],\r\n                total,\r\n                getById: props.getById\r\n            },\r\n            loadMore: (!props.options?.type && props.loadMore) || ['artist', 'playlist'].indexOf(props.options?.type) !== -1 \r\n        });\r\n\r\n        await player.track(item);\r\n        player.play();\r\n    }\r\n\r\n    defineExpose({\r\n        reload\r\n    });\r\n\r\n</script>"],"names":[],"mappings":"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"}