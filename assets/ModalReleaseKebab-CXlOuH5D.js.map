{"version":3,"file":"ModalReleaseKebab-CXlOuH5D.js","sources":["../../src/components/modals/ModalReleaseKebab.vue"],"sourcesContent":["<template>\r\n    <BaseModal\r\n        name=\"release-kebab\"\r\n        :mobileMode=\"true\"\r\n        :closeOutside=\"true\"\r\n        :isLoading=\"data.loading\"\r\n    >\r\n        <template v-slot:title>\r\n            <div class=\"title\">\r\n                <div class=\"img\" @click=\"gallery\">\r\n                    <Img v-if=\"data.item?.cover?.resized\"\r\n                        :preview=\"data.item?.cover?.resized\"\r\n                        :original=\"data.item?.cover?.original\"\r\n                        :alt=\"data.item?.title\"\r\n                        aspectRatio=\"1 / 1\"\r\n                    />\r\n                </div>\r\n                <span>{{ data.item?.title }}</span>\r\n            </div>\r\n        </template>\r\n        <template v-slot:content>\r\n            <ul class=\"kebab-list\">\r\n                <li class=\"clickable\" @click=\"shareIt\">\r\n                    <Icon icon=\"share\"/>\r\n                    <span>{{ t('modals.release-kebab.share') }}</span>\r\n                </li>\r\n                <li class=\"clickable\" @click=\"about\">\r\n                    <Icon icon=\"help\"/>\r\n                    <span>{{ t('modals.release-kebab.about') }}</span>\r\n                </li>\r\n            </ul>\r\n        </template>\r\n    </BaseModal>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, reactive } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nimport Img from 'ðŸ”—/components/ui/Img.vue';\r\nimport BaseModal from 'ðŸ”—/components/modals/BaseModal.vue';\r\nimport stores from '@/stores';\r\n\r\nimport api from 'ðŸ”—/api';\r\nimport { message } from 'ðŸ”—/utils/utils';\r\n\r\nconst { t } = useI18n();\r\n\r\nconst tg = stores.tg();\r\nconst modals = stores.modals();\r\nconst share = stores.share();\r\n\r\nconst data = reactive({\r\n    loading: true\r\n});\r\n\r\n\r\nconst shareIt = () => {\r\n    close();\r\n\r\n    share.release(data.item);\r\n}\r\n\r\nconst about = () => {\r\n    close();\r\n\r\n    modals.open('release', { quietClose: true, data: {\r\n        id: data.item.id,\r\n        item: data.item\r\n    } });\r\n}\r\n\r\nconst gallery = () => {\r\n    if (!data.item?.id || !data.item?.cover?.original) {\r\n        return;\r\n    }\r\n\r\n    modals.open('gallery', { data: { imgs: [{\r\n        title: data.item.title,\r\n        ...data.item?.cover\r\n    }] } });\r\n}\r\n\r\nconst like = () => {\r\n    message.info(t('common.soon'));\r\n}\r\n\r\nconst close = () => {\r\n    modals.close('release-kebab');\r\n};\r\n\r\n\r\nonMounted(async () => {\r\n    const payload = modals.getData('release-kebab');\r\n\r\n    if (!payload?.id) {\r\n        close();\r\n        return;\r\n    }\r\n\r\n    if (payload.item) {\r\n        data.item = payload.item;\r\n    } else {\r\n        data.item = await api.releases().get(payload.id);\r\n    }\r\n\r\n    data.loading = false;\r\n});\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .title {\r\n        display: flex;\r\n        width: 100%;\r\n        align-items: center;\r\n        gap: 24px;\r\n        flex-direction: column;\r\n        padding-top: 12px;\r\n\r\n        .img {\r\n            width: 74px;\r\n            height: 74px;\r\n            border-radius: 12px;\r\n            @include animage-booble-shadow;\r\n\r\n            img {\r\n                width: 100%;\r\n                height: 100%;\r\n                border-radius: 12px;\r\n            }\r\n        }\r\n    }\r\n\r\n    ul.kebab-list {\r\n        @include settings-list;\r\n        margin-top: 24px;\r\n    }\r\n</style>\r\n"],"names":[],"mappings":";;;;AA6CA;;;;;AAVc;AAWd,MAAM,EAAE,CAAC,EAAE,GAAG,OAAO,EAAE,CAAC;AACxB;AACW,MAAM,CAAC,EAAE,GAAG;AACvB,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC;AAC7B;AACA,MAAM,IAAI,GAAG,QAAQ,CAAC;AACtB,IAAI,OAAO,EAAE,IAAI;AACjB,CAAC,CAAC,CAAC;AACH;AACA;AACA,MAAM,OAAO,GAAG,MAAM;AACtB,IAAI,KAAK,EAAE,CAAC;AACZ;AACA,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC7B,EAAC;AACD;AACA,MAAM,KAAK,GAAG,MAAM;AACpB,IAAI,KAAK,EAAE,CAAC;AACZ;AACA,IAAI,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE;AACrD,QAAQ,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;AACxB,QAAQ,IAAI,EAAE,IAAI,CAAC,IAAI;AACvB,KAAK,EAAE,CAAC,CAAC;AACT,EAAC;AACD;AACA,MAAM,OAAO,GAAG,MAAM;AACtB,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE;AACvD,QAAQ,OAAO;AACf,IAAI,CAAC;AACL;AACA,IAAI,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC;AAC5C,QAAQ,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK;AAC9B,QAAQ,GAAG,IAAI,CAAC,IAAI,EAAE,KAAK;AAC3B,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC;AACZ,EAAC;AAKD;AACA,MAAM,KAAK,GAAG,MAAM;AACpB,IAAI,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;AAClC,CAAC,CAAC;AACF;AACA;AACA,SAAS,CAAC,YAAY;AACtB,IAAI,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;AACpD;AACA,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE,EAAE;AACtB,QAAQ,KAAK,EAAE,CAAC;AAChB,QAAQ,OAAO;AACf,IAAI,CAAC;AACL;AACA,IAAI,IAAI,OAAO,CAAC,IAAI,EAAE;AACtB,QAAQ,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;AACjC,IAAI,CAAC,MAAM;AACX,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,GAAG,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;AACzD,IAAI,CAAC;AACL;AACA,IAAI,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACzB,CAAC,CAAC,CAAC;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}