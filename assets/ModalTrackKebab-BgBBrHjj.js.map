{"version":3,"file":"ModalTrackKebab-BgBBrHjj.js","sources":["../../src/components/modals/ModalTrackKebab.vue"],"sourcesContent":["<template>\r\n    <BaseModal\r\n        name=\"track-kebab\"\r\n        :mobileMode=\"true\"\r\n        :closeOutside=\"true\"\r\n        :isLoading=\"data.loading\"\r\n    >\r\n        <template v-slot:title>\r\n            <div class=\"title\">\r\n                <div class=\"img\" @click=\"gallery\">\r\n                    <Img v-if=\"data.item?.cover?.resized\"\r\n                        :preview=\"data.item?.cover?.resized\"\r\n                        :original=\"data.item?.cover?.original\"\r\n                        :alt=\"data.item?.title\"\r\n                    />\r\n                </div>\r\n                <span>{{ data.item?.title }}</span>\r\n            </div>\r\n        </template>\r\n        <template v-slot:content>\r\n            <ul class=\"kebab-list\">\r\n                <li class=\"\">\r\n                    <div class=\"buttons\">\r\n                        <IconButton\r\n                            icon=\"download\"\r\n                            class=\"tertiary size-xl\"\r\n                            @click=\"download\"\r\n                        />\r\n\r\n                        <IconButton\r\n                            icon=\"heart\"\r\n                            class=\"tertiary size-xl\"\r\n                            @click=\"like\"\r\n                        />\r\n                    </div>\r\n                </li>\r\n                <li class=\"clickable\" @click=\"shareIt\">\r\n                    <Icon icon=\"share\"/>\r\n                    <span>{{ t('modals.track-kebab.share') }}</span>\r\n                </li>\r\n\r\n                <template v-if=\"data.releases?.length\">\r\n                    <li v-for=\"item in data.releases\"\r\n                        :key=\"item.id\"\r\n                        class=\"clickable\"\r\n                        @click=\"openRelease(item)\">\r\n\r\n                        <Img\r\n                            v-if=\"item?.cover\"\r\n                            :preview=\"item?.cover?.crop\"\r\n                            :original=\"item?.cover?.original\"\r\n                            :alt=\"item.title\"\r\n                            :skeleton=\"true\"\r\n                        />\r\n                        <Icon v-else icon=\"playlist\"/>\r\n\r\n                        <span>{{ t('modals.track-kebab.go-to-release', { 'release-title': item.title }) }}</span>\r\n                    </li>\r\n                </template>\r\n\r\n                <li class=\"clickable\" @click=\"about\">\r\n                    <Icon icon=\"help\"/>\r\n                    <span>{{ t('modals.track-kebab.about') }}</span>\r\n                </li>\r\n            </ul>\r\n        </template>\r\n    </BaseModal>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, reactive } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nimport Img from 'ðŸ”—/components/ui/Img.vue';\r\nimport IconButton from 'ðŸ”—/components/ui/IconButton.vue';\r\nimport BaseModal from 'ðŸ”—/components/modals/BaseModal.vue';\r\nimport stores from '@/stores';\r\n\r\nimport api from 'ðŸ”—/api';\r\nimport { message } from 'ðŸ”—/utils/utils';\r\n\r\nconst { t } = useI18n();\r\n\r\nconst tg = stores.tg();\r\nconst modals = stores.modals();\r\nconst share = stores.share();\r\nconst nav = stores.nav();\r\n\r\nconst data = reactive({\r\n    loading: true,\r\n    releases: []\r\n});\r\n\r\n\r\nconst shareIt = () => {\r\n    share.track(data.item, { type: 'release', release: data.releases[0] });\r\n\r\n    setTimeout(() => {\r\n        close();\r\n    }, 400);\r\n}\r\n\r\nconst about = () => {\r\n    setTimeout(() => {\r\n        close();\r\n    }, 400);\r\n\r\n    modals.open('track', { quietClose: true, data: {\r\n        id: data.item.id,\r\n        item: data.item,\r\n        releases: data.releases || []\r\n    } });\r\n}\r\n\r\nconst openRelease = (release) => {\r\n    nav.open('release', { id: release?.id });\r\n    close();\r\n}\r\n\r\nconst download = () => {\r\n    setTimeout(() => {\r\n        close();\r\n    }, 400);\r\n\r\n    modals.open('track-download', { quietClose: true, data: {\r\n        id: data.item.id,\r\n        item: data.item,\r\n        releases: data.releases || []\r\n    } });\r\n}\r\n\r\nconst gallery = () => {\r\n    if (!data.item?.id || !data.item?.cover?.original) {\r\n        return;\r\n    }\r\n\r\n    modals.open('gallery', { data: { imgs: [{\r\n        title: data.item.title,\r\n        ...data.item?.cover\r\n    }] } });\r\n}\r\n\r\nconst like = () => {\r\n    message.info(t('common.soon'));\r\n}\r\n\r\nconst close = () => {\r\n    modals.close('track-kebab');\r\n};\r\n\r\n\r\nonMounted(async () => {\r\n    const payload = modals.getData('track-kebab');\r\n\r\n    if (!payload?.id) {\r\n        close();\r\n        return;\r\n    }\r\n\r\n    data.item = await api.tracks().get(payload.id);\r\n\r\n    const releases = await api.releases().list({ tracks: [payload.id] });\r\n    if (releases?.items) {\r\n        data.releases = releases.items;\r\n    }\r\n\r\n    data.loading = false;\r\n});\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .title {\r\n        display: flex;\r\n        width: 100%;\r\n        align-items: center;\r\n        gap: 24px;\r\n        flex-direction: column;\r\n        padding-top: 12px;\r\n\r\n        .img {\r\n            width: 74px;\r\n            height: 74px;\r\n            border-radius: 12px;\r\n            @include animage-booble-shadow;\r\n\r\n            img {\r\n                width: 100%;\r\n                height: 100%;\r\n                border-radius: 12px;\r\n            }\r\n        }\r\n    }\r\n\r\n    .buttons {\r\n        display: flex;\r\n        flex-direction: row;\r\n        gap: 8px;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n\r\n    ul.kebab-list {\r\n        @include settings-list;\r\n        margin-top: 24px;\r\n        li {\r\n            .skeleton-wrapper {\r\n                min-width: 34px;\r\n                width: 34px;\r\n                height: 34px;\r\n                margin: -7px;\r\n                border-radius: 8px;\r\n                overflow: hidden;\r\n            }\r\n        }\r\n    }\r\n</style>\r\n"],"names":[],"mappings":";;;;;;;;AAgFA;;;;;AAXc;AAYd,MAAM,EAAE,CAAC,EAAE,GAAG,OAAO,EAAE,CAAC;AACxB;AACW,MAAM,CAAC,EAAE,GAAG;AACvB,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC;AAC7B,MAAM,GAAG,GAAG,MAAM,CAAC,GAAG,EAAE,CAAC;AACzB;AACA,MAAM,IAAI,GAAG,QAAQ,CAAC;AACtB,IAAI,OAAO,EAAE,IAAI;AACjB,IAAI,QAAQ,EAAE,EAAE;AAChB,CAAC,CAAC,CAAC;AACH;AACA;AACA,MAAM,OAAO,GAAG,MAAM;AACtB,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAC3E;AACA,IAAI,UAAU,CAAC,MAAM;AACrB,QAAQ,KAAK,EAAE,CAAC;AAChB,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACZ,EAAC;AACD;AACA,MAAM,KAAK,GAAG,MAAM;AACpB,IAAI,UAAU,CAAC,MAAM;AACrB,QAAQ,KAAK,EAAE,CAAC;AAChB,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACZ;AACA,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE;AACnD,QAAQ,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;AACxB,QAAQ,IAAI,EAAE,IAAI,CAAC,IAAI;AACvB,QAAQ,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,EAAE;AACrC,KAAK,EAAE,CAAC,CAAC;AACT,EAAC;AACD;AACA,MAAM,WAAW,GAAG,CAAC,OAAO,KAAK;AACjC,IAAI,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;AAC7C,IAAI,KAAK,EAAE,CAAC;AACZ,EAAC;AACD;AACA,MAAM,QAAQ,GAAG,MAAM;AACvB,IAAI,UAAU,CAAC,MAAM;AACrB,QAAQ,KAAK,EAAE,CAAC;AAChB,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACZ;AACA,IAAI,MAAM,CAAC,IAAI,CAAC,gBAAgB,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE;AAC5D,QAAQ,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;AACxB,QAAQ,IAAI,EAAE,IAAI,CAAC,IAAI;AACvB,QAAQ,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,EAAE;AACrC,KAAK,EAAE,CAAC,CAAC;AACT,EAAC;AACD;AACA,MAAM,OAAO,GAAG,MAAM;AACtB,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE;AACvD,QAAQ,OAAO;AACf,IAAI,CAAC;AACL;AACA,IAAI,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC;AAC5C,QAAQ,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK;AAC9B,QAAQ,GAAG,IAAI,CAAC,IAAI,EAAE,KAAK;AAC3B,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC;AACZ,EAAC;AACD;AACA,MAAM,IAAI,GAAG,MAAM;AACnB,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;AACnC,EAAC;AACD;AACA,MAAM,KAAK,GAAG,MAAM;AACpB,IAAI,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;AAChC,CAAC,CAAC;AACF;AACA;AACA,SAAS,CAAC,YAAY;AACtB,IAAI,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;AAClD;AACA,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE,EAAE;AACtB,QAAQ,KAAK,EAAE,CAAC;AAChB,QAAQ,OAAO;AACf,IAAI,CAAC;AACL;AACA,IAAI,IAAI,CAAC,IAAI,GAAG,MAAM,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;AACnD;AACA,IAAI,MAAM,QAAQ,GAAG,MAAM,GAAG,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACzE,IAAI,IAAI,QAAQ,EAAE,KAAK,EAAE;AACzB,QAAQ,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC;AACvC,IAAI,CAAC;AACL;AACA,IAAI,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACzB,CAAC,CAAC,CAAC;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}