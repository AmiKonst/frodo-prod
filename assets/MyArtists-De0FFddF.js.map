{"version":3,"file":"MyArtists-De0FFddF.js","sources":["../../shared/components/ui/ArtistPreview.vue","../../shared/components/blocks/Artists.vue","../../src/pages/Favorite/MyArtists/MyArtists.vue"],"sourcesContent":["<template>\r\n    <div class=\"artist-preview\"\r\n        :class=\"{\r\n            row: props.row,\r\n            invert: props.invert,\r\n            disabled: props.disabled\r\n        }\"\r\n    >\r\n        <div>\r\n            <div class=\"profile-image\" :class=\"{ disabled: false }\">\r\n                <Img v-if=\"profileImage?.resized || defaultProfileImage?.resized\"\r\n                    :preview=\"profileImage?.resized || defaultProfileImage?.resized\"\r\n                    :original=\"profileImage?.original || defaultProfileImage?.original\"\r\n                    :skeleton=\"true\"\r\n                />\r\n\r\n               <!--  <AudioToggle v-if=\"props.item?.wave\"\r\n                    :state=\"data.state\"\r\n                    @play=\"play\"\r\n                    @pause=\"data.state = 'pause'\"\r\n                /> -->\r\n            </div>\r\n            <State v-if=\"!props.row && props.showState && props.item?.state\" \r\n                :state=\"props.item?.state\"\r\n                class=\"solid\" />\r\n        </div>\r\n        <div>\r\n            <div>\r\n                <span class=\"name\">\r\n                    {{ props.item?.name || t('artists.empty-name') }}\r\n                </span>\r\n               \r\n                <State v-if=\"props.row && props.showState && props.item?.state\" \r\n                    :state=\"props.item?.state\"\r\n                />\r\n            </div>\r\n        </div>\r\n        <div v-if=\"props.chevron\" class=\"chevron\">\r\n            <Icon icon=\"chevron-right\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { onMounted, reactive, computed } from 'vue';\r\n    import { useI18n } from 'vue-i18n';\r\n    import moment from 'moment';\r\n    import Button from 'ðŸ”—/components/ui/Button.vue';\r\n    import Img from 'ðŸ”—/components/ui/Img.vue';\r\n    // import AudioToggle from 'ðŸ”—/components/ui/AudioToggle.vue';\r\n    import api from 'ðŸ”—/api';\r\n    import stores from '@/stores';\r\n    import State from 'ðŸ”—/components/ui/State.vue';\r\n\r\n    // const player = stores.player();\r\n\r\n\r\n    const emit = defineEmits(['change']);\r\n\r\n    const { t } = useI18n();\r\n\r\n    const props = defineProps({\r\n        item: { type: Object, default: () => ({}) },\r\n        showState: { type: Boolean, default: false },\r\n        row: { type: Boolean, default: false },\r\n        disabled: { type: Boolean, default: false },\r\n        invert: { type: Boolean, default: false },\r\n        chevron: { type: Boolean, default: false }\r\n    });\r\n\r\n    const profileImage = computed(() => {\r\n        let url;\r\n        if (props.item?.profileImage instanceof File) {\r\n            url = URL.createObjectURL(props.item.profileImage);\r\n        }\r\n\r\n        return url ? {\r\n            resized: url,\r\n            cover: url,\r\n            original: url\r\n        } : props.item?.profileImage;\r\n    });\r\n\r\n    const data = reactive({\r\n    });\r\n\r\n\r\n    const defaultProfileImage = computed(() => {\r\n        return api.artists().defaultProfileImage;\r\n    });\r\n\r\n\r\n    const play = async () => {\r\n        // data.state = 'play';\r\n\r\n        // if (!data.song) {\r\n        //     data.song = await player.song(props.item); \r\n        // console.log(data.song);\r\n        // }\r\n\r\n        // data.song.play();\r\n    }\r\n\r\n    // onMounted(() => {\r\n    //     getItems();\r\n    // });\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .artist-preview {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: stretch;\r\n        gap: 8px;\r\n        width: 100%;\r\n        overflow: hidden;\r\n        & > div {\r\n            &:first-child {\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 8px;\r\n                position: relative;\r\n\r\n                .profile-image {\r\n                    width: 146px;\r\n                    height: 146px;\r\n                    position: relative;\r\n\r\n                    .skeleton-wrapper,\r\n                    img {\r\n                        width: 100%;\r\n                        height: 100%;\r\n                        border-radius: 10px;\r\n                        object-fit: cover;\r\n                        overflow: hidden;\r\n                    }\r\n\r\n                    .audio-toggle {\r\n                        position: absolute;\r\n                        top: 0;\r\n                        left: 0;\r\n                        right: 0;\r\n                        bottom: 0;\r\n                    }\r\n\r\n                    &.disabled {\r\n                        filter: grayscale(1);\r\n                        .skeleton-wrapper,\r\n                        img {\r\n                            cursor: default;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                .state {\r\n                    position: absolute;\r\n                    right: 8px;\r\n                    top: 8px;\r\n                }\r\n            }\r\n            &:nth-child(2) {\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 4px;\r\n                flex: 1;\r\n                min-width: 0;\r\n\r\n                & > div {\r\n                    display: flex;\r\n                    flex-direction: row;\r\n                    align-items: baseline;\r\n                    gap: 4px;\r\n                    min-width: 0;\r\n\r\n                    &:first-child {\r\n                        flex-wrap: nowrap;\r\n                    }\r\n                    // &:last-child {\r\n                    //     flex-direction: column;\r\n                    //     width: 100%;\r\n                    //     span {\r\n                    //         display: flex;\r\n                    //         flex-direction: row;\r\n                    //         gap: 4px;\r\n                    //     }\r\n                    // }\r\n\r\n                    .name {\r\n                        font: var(--font-body-1);\r\n                        color: var(--dark-500);\r\n                        white-space: nowrap;\r\n                        text-overflow: ellipsis;\r\n                        overflow: hidden;\r\n                        &.full {\r\n                            flex-shrink: 0;\r\n                        }\r\n                    }\r\n\r\n                    .state {\r\n                        margin-left: 4px;\r\n                    }\r\n                }\r\n            }\r\n            &.chevron {\r\n                margin-left: auto;\r\n                display: flex;\r\n                align-items: center;\r\n                svg {\r\n                    width: 18px;\r\n                    height: 18px;\r\n                    fill: var(--dark-500);\r\n                }\r\n            }\r\n        }\r\n\r\n        &.disabled {\r\n            opacity: .4;\r\n            filter: grayscale(1);\r\n            cursor: default;\r\n        }\r\n\r\n        &.row {\r\n            gap: 12px;\r\n            flex-direction: row;\r\n            & > div {\r\n                &:first-child {\r\n                    .profile-image {\r\n                       width: 46px;\r\n                       height: 46px;\r\n                    }\r\n\r\n                    .state {\r\n                    }\r\n                }\r\n                &:nth-child(2) {\r\n                    justify-content: center;\r\n                    & > div {\r\n                        &:first-child {\r\n                        }\r\n                        &:last-child {\r\n                            align-items: start;\r\n                        }\r\n\r\n                        \r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        &.invert {\r\n            & > div:nth-child(2) {\r\n                & > div {\r\n                    .title {\r\n                        color: var(--white-500);           \r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</style>","<template>\r\n    <div class=\"items-list\">\r\n        <ul class=\"items\" v-if=\"data.items.length\">\r\n            <li v-for=\"(item, id) in data.items\"\r\n                :class=\"{ active: props.id === item.code }\"\r\n                @click=\"onClick(item)\"\r\n            >\r\n                <ArtistPreview\r\n                    :row=\"true\"\r\n                    :chevron=\"true\"\r\n                    :item=\"item\"\r\n                />\r\n            </li>\r\n        </ul>\r\n\r\n        <Button :loading=\"data.loading\"\r\n            class=\"tertiary size-l\"\r\n            :name=\"t(`blocks.artists.load`)\"\r\n            v-if=\"data.loading || (data.items.length < data.total)\"\r\n            @click=\"getItems\"\r\n        />\r\n\r\n        <EmptyLabel\r\n            v-if=\"!data.items.length && !data.loading\"\r\n            animate-icon=\"artists\"\r\n            class=\"empty\"\r\n            :title=\"props.empty?.title\"\r\n            :description=\"props.empty?.description\"\r\n        />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { useI18n } from 'vue-i18n';\r\n    import { onMounted, reactive, computed } from 'vue';\r\n    import api from 'ðŸ”—/api';\r\n    import ArtistPreview from 'ðŸ”—/components/ui/ArtistPreview.vue';\r\n    import Button from 'ðŸ”—/components/ui/Button.vue';\r\n    import EmptyLabel from 'ðŸ”—/components/ui/EmptyLabel.vue';\r\n    import { delay } from 'ðŸ”—/utils/utils';\r\n    import Img from 'ðŸ”—/components/ui/Img.vue';\r\n    import stores from '@/stores';\r\n\r\n    const emit = defineEmits(['change']);\r\n\r\n    const nav = stores.nav();\r\n\r\n\r\n    const { t } = useI18n();\r\n\r\n    const props = defineProps({\r\n        empty: { type: Object, default: () => ({}) },\r\n        sort: { type: [Object, null], default: () => ({\r\n            code: 'name',\r\n            direction: 'asc'\r\n        }) },\r\n        handler: { type: [String, null], default: () => null },\r\n        source: { type: Object, default: () => ({ store: 'artists', fnName: 'list' }) }\r\n    });\r\n\r\n    const data = reactive({\r\n        items: [],\r\n        loading: false,\r\n        skip: 0,\r\n        take: 30, // Temp\r\n        total: 0\r\n    });\r\n\r\n    const getItems = async () => {\r\n        clearTimeout(data.setItemsTimeout);\r\n        data.loading = true;\r\n\r\n        if (!data.skip) {\r\n            data.items = [];\r\n        }\r\n\r\n        let params = {\r\n            skip: data.skip,\r\n            take: data.take\r\n        };\r\n\r\n        if (props.sort) {\r\n            params.sort = props.sort.code;\r\n            params.sort_dir = props.sort.direction;\r\n        }\r\n\r\n        const payload = await api[props.source.store]()[props.source.fnName](params) || [];\r\n\r\n        data.setItemsTimeout = setTimeout(() => {\r\n            if (payload?.items?.length) {\r\n                data.items.splice(data.items.length, 0, ...(payload.items || []));\r\n            }\r\n\r\n            data.skip = data.items.length;\r\n            data.total = payload?.total || 0;\r\n\r\n            data.loading = false;\r\n        }, 200);\r\n    };\r\n\r\n    const reload = () => {\r\n        data.skip = 0;\r\n        getItems();\r\n    };\r\n\r\n    const onClick = (item) => {\r\n        emit('change', item);\r\n\r\n        if (props.handler === 'profile' && item?.code) {\r\n            nav.open('artist', { code: item?.code });\r\n        }\r\n    }\r\n\r\n    defineExpose({\r\n        reload\r\n    });\r\n\r\n    onMounted(() => {\r\n        getItems();\r\n    });\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    @include default-items-list;\r\n</style>","<template>\r\n    <div class=\"head\">\r\n        <label class=\"title\">{{ t('pages.favorite-my-artists.title') }}</label>    \r\n    </div>\r\n\r\n\r\n    <Artists\r\n        v-if=\"data.ready\"\r\n        :source=\"{\r\n            store: 'user',\r\n            fnName: 'getMyArtists'\r\n        }\"\r\n        handler=\"profile\"\r\n        :empty=\"{\r\n            title: t('pages.favorite-my-artists.empty.title'),\r\n            description: t('pages.favorite-my-artists.empty.description')\r\n        }\"\r\n    />\r\n\r\n    <Ready page=\"favorite-my-artists\" :init=\"init\" />\r\n</template>\r\n\r\n<script setup>\r\n    import { computed, onMounted, onBeforeUnmount, reactive } from 'vue';\r\n    import { useI18n } from 'vue-i18n';\r\n    import Ready from 'ðŸ”—/components/ui/Ready.vue';\r\n    import Artists from 'ðŸ”—/components/blocks/Artists.vue';\r\n    import EmptyLabel from 'ðŸ”—/components/ui/EmptyLabel.vue';\r\n    import stores from '@/stores';\r\n\r\n    const { t } = useI18n();\r\n\r\n\r\n    const tg = stores.tg();\r\n\r\n    const data = reactive({\r\n        ready: false\r\n    });\r\n\r\n    const init = async () => {\r\n        data.ready = true;\r\n    }\r\n\r\n    onMounted(() => {\r\n        tg.showBackButton();\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n        tg.hideBackButton();\r\n    });\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .head {\r\n        @include page-title;\r\n    }\r\n    .empty-label {\r\n        padding: 0 20px;\r\n    }\r\n</style>\r\n"],"names":[],"mappings":"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"}