{"version":3,"file":"ModalTrackLyrics-C9GYa27s.js","sources":["../../src/components/modals/ModalTrackLyrics.vue"],"sourcesContent":["<template>\r\n    <BaseModal\r\n        name=\"track-lyrics\"\r\n        :mobileMode=\"true\"\r\n        :closeOutside=\"true\"\r\n        :isLoading=\"data.loading\"\r\n    >\r\n        <template v-slot:title>\r\n            <div class=\"title\">\r\n                <span>\r\n                    {{ data.item?.title }}\r\n                </span>\r\n\r\n                <div>\r\n                    <TrackWave \r\n                        :wave=\"data.item.wave\"\r\n                        :id=\"data.item.id\"\r\n                        :duration=\"data.item.duration\"\r\n                        :simplify=\"2\"\r\n                        class=\"wave\"\r\n                        v-if=\"data.item?.trackFile\"\r\n                    />\r\n                    \r\n                    <AudioToggle v-if=\"data.item?.wave\"\r\n                        :state=\"state\"\r\n                        :light=\"true\"\r\n                        class=\"secondary size-m\"\r\n                        :class=\"{ invert: others.theme !== 'dark' }\"\r\n                        @play=\"play\"\r\n                        @pause=\"pause\"\r\n                    />\r\n                </div>\r\n\r\n            </div>\r\n        </template>\r\n        <template v-slot:content>\r\n            <ul class=\"kebab-list\" v-if=\"data.item?.lyrics\">\r\n                <li>\r\n                    <p>{{ data.item.lyrics }}</p>\r\n                </li>\r\n            </ul>\r\n        </template>\r\n    </BaseModal>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, reactive, computed } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nimport BaseModal from 'ðŸ”—/components/modals/BaseModal.vue';\r\nimport TrackWave from 'ðŸ”—/components/ui/TrackWave.vue';\r\nimport stores from '@/stores';\r\nimport AudioToggle from 'ðŸ”—/components/ui/AudioToggle.vue';\r\n\r\nimport api from 'ðŸ”—/api';\r\n\r\nconst { t } = useI18n();\r\n\r\nconst modals = stores.modals();\r\nconst player = stores.player();\r\nconst others = stores.others();\r\n\r\nconst data = reactive({\r\n    loading: true\r\n});\r\n\r\nconst state = computed(() => {\r\n    if (!player.panes.default || player.panes.default._item?.id !== data.item?.id) {\r\n        return;\r\n    }\r\n\r\n    return player.panes.default._state;\r\n});\r\n\r\nconst play = async () => {\r\n    if (!state.value) {\r\n        await player.track(data.item);\r\n\r\n        if (!player.panes?.default) {\r\n            return;\r\n        }\r\n\r\n        player.panes.default.play();\r\n        return;\r\n    }\r\n\r\n    await player.play();\r\n}\r\n\r\nconst pause = async () => {\r\n    await player.pause();\r\n}\r\n\r\nconst close = () => {\r\n    modals.close('track-lyrics');\r\n};\r\n\r\nonMounted(async () => {\r\n    const payload = modals.getData('track-lyrics');\r\n\r\n    if (!payload?.id) {\r\n        close();\r\n        return;\r\n    }\r\n\r\n    if (payload.item) {\r\n        data.item = payload.item;\r\n    } else {\r\n        data.item = await api.tracks().get(payload.id);\r\n    }\r\n\r\n    if (!data.item.lyrics) {\r\n        close();\r\n        return;\r\n    }\r\n\r\n    data.loading = false;\r\n});\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .title {\r\n        display: flex;\r\n        width: 100%;\r\n        align-items: center;\r\n        gap: 12px;\r\n        padding-bottom: 12px;\r\n        flex-direction: column;\r\n        padding-top: 12px;\r\n        width: calc(100vw - 40px);\r\n\r\n        & > div {\r\n            display: flex;\r\n            flex-direction: row;\r\n            align-items: center;\r\n            // justify-content: center;\r\n            gap: 8px;\r\n            width: 100%;\r\n            button {\r\n                position: relative;\r\n                right: auto;\r\n                top: auto;\r\n            }\r\n        }\r\n\r\n        .wave {\r\n            height: 24px;\r\n        }\r\n    }\r\n\r\n    ul.kebab-list {\r\n        @include settings-list;\r\n        margin-top: 24px;\r\n        li {\r\n            p {\r\n                white-space: pre-line;\r\n                font: var(--font-body-1);\r\n                color: var(--dark-500);\r\n                margin: 0;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n</style>\r\n"],"names":[],"mappings":";;;;;;;AAuDA;;;;;AAVc;AAWd,MAAM,EAAE,CAAC,EAAE,GAAG,OAAO,EAAE,CAAC;AACxB;AACA,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B;AACA,MAAM,IAAI,GAAG,QAAQ,CAAC;AACtB,IAAI,OAAO,EAAE,IAAI;AACjB,CAAC,CAAC,CAAC;AACH;AACA,MAAM,KAAK,GAAG,QAAQ,CAAC,MAAM;AAC7B,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,IAAI,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,KAAK,IAAI,CAAC,IAAI,EAAE,EAAE,EAAE;AACnF,QAAQ,OAAO;AACf,IAAI,CAAC;AACL;AACA,IAAI,OAAO,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC;AACvC,CAAC,CAAC,CAAC;AACH;AACA,MAAM,IAAI,GAAG,YAAY;AACzB,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;AACtB,QAAQ,MAAM,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACtC;AACA,QAAQ,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,EAAE;AACpC,YAAY,OAAO;AACnB,QAAQ,CAAC;AACT;AACA,QAAQ,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;AACpC,QAAQ,OAAO;AACf,IAAI,CAAC;AACL;AACA,IAAI,MAAM,MAAM,CAAC,IAAI,EAAE,CAAC;AACxB,EAAC;AACD;AACA,MAAM,KAAK,GAAG,YAAY;AAC1B,IAAI,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC;AACzB,EAAC;AACD;AACA,MAAM,KAAK,GAAG,MAAM;AACpB,IAAI,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;AACjC,CAAC,CAAC;AACF;AACA,SAAS,CAAC,YAAY;AACtB,IAAI,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;AACnD;AACA,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE,EAAE;AACtB,QAAQ,KAAK,EAAE,CAAC;AAChB,QAAQ,OAAO;AACf,IAAI,CAAC;AACL;AACA,IAAI,IAAI,OAAO,CAAC,IAAI,EAAE;AACtB,QAAQ,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;AACjC,IAAI,CAAC,MAAM;AACX,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;AACvD,IAAI,CAAC;AACL;AACA,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AAC3B,QAAQ,KAAK,EAAE,CAAC;AAChB,QAAQ,OAAO;AACf,IAAI,CAAC;AACL;AACA,IAAI,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;AACzB,CAAC,CAAC,CAAC;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}