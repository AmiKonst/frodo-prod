{"version":3,"file":"ItemDetail--Bi63mBD.js","sources":["../../shared/components/ui/ItemDetail.vue"],"sourcesContent":["<template>\r\n    <div \r\n        class=\"detail-item\"\r\n        ref=\"root\"\r\n        @scroll=\"onScroll\"\r\n    >\r\n        <div \r\n            class=\"background\" \r\n            :style=\"{\r\n                opacity: backgroundOpacity,\r\n                height: props.height + 'px'\r\n            }\"\r\n        >\r\n            <slot name=\"background\"></slot>\r\n        </div>\r\n\r\n        <div class=\"box\">\r\n            <div \r\n                class=\"preview\"\r\n                :style=\"{\r\n                    opacity: 1,\r\n                    height: props.height + 'px'\r\n                }\"\r\n            >\r\n                <div \r\n                    class=\"wrapper\"\r\n                    :style=\"{ opacity: wrapperOpacity }\"\r\n                >\r\n                    <slot name=\"preview\"></slot>\r\n                </div>\r\n            </div>\r\n\r\n            <div \r\n              class=\"detail\" \r\n              ref=\"detail\"\r\n            >\r\n                <slot name=\"detail\"></slot>\r\n            </div>\r\n        </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { ref, reactive, computed, onMounted } from \"vue\";\r\n\r\n    const props = defineProps({\r\n        height: { type: Number, default: 384 }\r\n    });\r\n\r\n    const data = reactive({\r\n        mode: 'preview'\r\n    });\r\n\r\n\r\n    const emit = defineEmits(['mode']);\r\n\r\n    const root = ref(null);\r\n    const detail = ref(null);\r\n\r\n    const scrollTop = ref(0);\r\n    const scrollDirection = ref(0);\r\n\r\n\r\n    const progress = computed(() =>\r\n        Math.min(1, scrollTop.value / props.height)\r\n    );\r\n\r\n    // Opacity\r\n        const wrapperOpacity = computed(() => 1 - progress.value);\r\n        const backgroundOpacity = computed(() => 1 - progress.value);\r\n\r\n    let lastY = 0;\r\n    const onScroll = (e) => {\r\n        const y = e.target.scrollTop;\r\n        scrollDirection.value = y - lastY;\r\n        lastY = y;\r\n\r\n        scrollTop.value = y;\r\n        updateMode();\r\n    }\r\n\r\n    const updateMode = () => {\r\n        const newMode = progress.value >= 1 ? \"detail\" : \"preview\";\r\n        if (newMode !== data.mode) {\r\n            data.mode = newMode;\r\n            emit('mode', newMode);\r\n        }\r\n    }\r\n\r\n    onMounted(() => {\r\n        root.value.scrollTop = 0;\r\n    });\r\n</script>\r\n\r\n\r\n<style scoped lang=\"scss\">\r\n    .detail-item {\r\n        position: relative;\r\n        height: 100%;\r\n        width: 100%;\r\n        overflow-y: auto;\r\n        scroll-behavior: smooth;\r\n\r\n        .background {\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            right: 0;\r\n        }\r\n\r\n        .box {\r\n            min-height: 100%;\r\n            display: flex;\r\n            flex-direction: column;\r\n        }\r\n        .preview {\r\n            position: relative;\r\n            top: 0;\r\n            overflow: hidden;\r\n            pointer-events: none;\r\n            z-index: 1;\r\n\r\n            .wrapper {\r\n                position: absolute;\r\n                inset: 0;\r\n                padding: 16px;\r\n                display: flex;\r\n                flex-direction: column;\r\n                justify-content: flex-end;\r\n                z-index: 2;\r\n                pointer-events: auto;\r\n                gap: 16px;\r\n            }\r\n        }\r\n\r\n        .detail {\r\n            flex: 1;\r\n            display: flex;\r\n            flex-direction: column;\r\n            background: var(--white-500);\r\n            // min-height: 200vh;\r\n            position: relative;\r\n\r\n            &:before {\r\n                content: '';\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                width: 100%;\r\n                height: 120px;\r\n                transform: translateY(-100%);\r\n                background: linear-gradient(to bottom, var(--white-0) 0%, var(--white-500) 100%);\r\n                pointer-events: none;\r\n            }\r\n        }\r\n    }\r\n</style>\r\n"],"names":[],"mappings":";;;AA4CA;AACA;;;;;;;;AAHc;AACd,IAEI,MAAM,KAAK,GAAG,OAEZ,CAAC;AACP;AACA,IAAI,MAAM,IAAI,GAAG,QAAQ,CAAC;AAC1B,QAAQ,IAAI,EAAE,SAAS;AACvB,KAAK,CAAC,CAAC;AACP;AACA;AACA,IAAI,MAAM,IAAI,GAAG,MAAqB,CAAC;AACvC;AACA,IAAI,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;AAC3B,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;AAC7B;AACA,IAAI,MAAM,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AAC7B,IAAI,MAAM,eAAe,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACnC;AACA;AACA,IAAI,MAAM,QAAQ,GAAG,QAAQ,CAAC;AAC9B,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC;AACnD,KAAK,CAAC;AACN;AACA;AACA,QAAQ,MAAM,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;AAClE,QAAQ,MAAM,iBAAiB,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;AACrE;AACA,IAAI,IAAI,KAAK,GAAG,CAAC,CAAC;AAClB,IAAI,MAAM,QAAQ,GAAG,CAAC,CAAC,KAAK;AAC5B,QAAQ,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC;AACrC,QAAQ,eAAe,CAAC,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC;AAC1C,QAAQ,KAAK,GAAG,CAAC,CAAC;AAClB;AACA,QAAQ,SAAS,CAAC,KAAK,GAAG,CAAC,CAAC;AAC5B,QAAQ,UAAU,EAAE,CAAC;AACrB,IAAI,EAAC;AACL;AACA,IAAI,MAAM,UAAU,GAAG,MAAM;AAC7B,QAAQ,MAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,IAAI,CAAC,GAAG,QAAQ,GAAG,SAAS,CAAC;AACnE,QAAQ,IAAI,OAAO,KAAK,IAAI,CAAC,IAAI,EAAE;AACnC,YAAY,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC;AAChC,YAAY,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AAClC,QAAQ,CAAC;AACT,IAAI,EAAC;AACL;AACA,IAAI,SAAS,CAAC,MAAM;AACpB,QAAQ,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC;AACjC,IAAI,CAAC,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}