{"version":3,"file":"Collage-DsVwasxX.js","sources":["../../shared/components/ui/Collage.vue"],"sourcesContent":["<template>\r\n    <div\r\n        class=\"collage\"\r\n        :class=\"{\r\n            vinyl: props.vinyl\r\n        }\"\r\n        v-if=\"itemsToRender.length\"\r\n        :style=\"{\r\n            '--gap': props.gap,\r\n            '--border-radius': props.borderRadius,\r\n            transform: `rotate(${currentRotation}deg)`\r\n        }\"\r\n    >\r\n        <template v-for=\"(item, index) in itemsToRender\" :key=\"index\">\r\n            <Img\r\n                class=\"collage-item\"\r\n                :class=\"[\r\n                    `layout-${itemsToRender.length}-${index + 1}`,\r\n                    cornerClass(itemsToRender.length, index + 1),\r\n                    animationClass\r\n                ]\"\r\n                :skeleton=\"true\"\r\n                :preview=\"props.highQuality ? (item?.crop || props.default?.crop) : (item?.resized || props.default?.resized)\"\r\n                :original=\"item?.original || props.default?.original\"\r\n                :alt=\"item?.alt || ''\"\r\n            />\r\n        </template>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { ref, watch, onBeforeUnmount, computed } from 'vue';\r\n    import Img from 'üîó/components/ui/Img.vue';\r\n\r\n    const props = defineProps({\r\n        items: { type: Array, default: () => [] },\r\n        default: { type: [Object, null], default: null },\r\n        gap: { type: String, default: '2px' },\r\n        highQuality: { type: Boolean, default: false },\r\n        borderRadius: { type: String, default: '8px' },\r\n        maxPreviewCount: { type: [Number, null], default: 8 },\r\n        animationType: {\r\n            type: String,\r\n            default: 'none',\r\n            validator: val => ['none', 'breath', 'float', 'tilt', 'pulse'].includes(val)\r\n        },\r\n        playing: { type: Boolean, default: false },\r\n        vinyl: { type: Boolean, default: false }\r\n    });\r\n\r\n    const currentRotation = ref(0);\r\n    let animationFrameId = null;\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É–≥–ª–∞ –≤—Ä–∞—â–µ–Ω–∏—è\r\n    const updateRotation = (timestamp) => {\r\n        const rotationSpeed = 360 / 24000; // 360deg –∑–∞ 24 —Å–µ–∫\r\n        currentRotation.value += rotationSpeed * (16); // –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ 60fps\r\n        currentRotation.value %= 360;\r\n        animationFrameId = requestAnimationFrame(updateRotation);\r\n    }\r\n\r\n    watch(\r\n        () => props.playing,\r\n        (val) => {\r\n            if (val) {\r\n                // –ó–∞–ø—É—Å–∫ –≤—Ä–∞—â–µ–Ω–∏—è\r\n                animationFrameId = requestAnimationFrame(updateRotation);\r\n            } else {\r\n                // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–∞—â–µ–Ω–∏—è\r\n                if (animationFrameId) {\r\n                    cancelAnimationFrame(animationFrameId);\r\n                    animationFrameId = null;\r\n                }\r\n            }\r\n        },\r\n        { immediate: true }\r\n    );\r\n\r\n    watch(\r\n        () => props.vinyl,\r\n        (val) => {\r\n            if (!props.vinyl) {\r\n                currentRotation.value = 0;\r\n            }\r\n        },\r\n        { immediate: true }\r\n    );\r\n\r\n    const itemsToRender = computed(() => {\r\n        return props.maxPreviewCount !== null\r\n            ? props.items.slice(0, props.maxPreviewCount)\r\n            : props.items;\r\n    });\r\n\r\n    const animationClass = computed(() => {\r\n        return props.animationType !== 'none' ? `img-anim-${props.animationType}` : '';\r\n    });\r\n\r\n    function cornerClass(count, pos) {\r\n        const cornersMap = {\r\n            1: { 1: 'corner-all' },\r\n            2: { 1: 'corner-left', 2: 'corner-right' },\r\n            3: { 1: 'corner-top-left', 2: 'corner-top-right', 3: 'corner-bottom' },\r\n            4: {\r\n                1: 'corner-top-left',\r\n                2: 'corner-top-right',\r\n                3: 'corner-bottom-left',\r\n                4: 'corner-bottom-right'\r\n            },\r\n            5: { 1: 'corner-top-left', 2: 'corner-top-right', 5: 'corner-bottom' },\r\n            6: { 1: 'corner-top-left', 3: 'corner-top-right', 4: 'corner-bottom-left', 6: 'corner-bottom-right' },\r\n            7: { 1: 'corner-top-left', 3: 'corner-top-right', 4: 'corner-bottom-left', 6: 'corner-bottom-right' },\r\n            8: { 1: 'corner-top-left', 4: 'corner-top-right', 5: 'corner-bottom-left', 8: 'corner-bottom-right' }\r\n        };\r\n\r\n        return (cornersMap[count] && cornersMap[count][pos]) || '';\r\n    }\r\n\r\n    onBeforeUnmount(() => {\r\n        if (animationFrameId) {\r\n            cancelAnimationFrame(animationFrameId);\r\n        }\r\n    });\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .collage {\r\n        position: relative;\r\n        width: 100%;\r\n        aspect-ratio: 1 / 1;\r\n    }\r\n\r\n    .collage-item {\r\n        position: absolute;\r\n        object-fit: cover;\r\n        overflow: hidden;\r\n        border-radius: 0;\r\n        will-change: transform, opacity;\r\n    }\r\n\r\n    /* –°–∫—Ä—É–≥–ª–µ–Ω–∏—è */\r\n    .corner-all {\r\n        border-radius: var(--border-radius);\r\n    }\r\n    .corner-top-left {\r\n        border-top-left-radius: var(--border-radius);\r\n    }\r\n    .corner-top-right {\r\n        border-top-right-radius: var(--border-radius);\r\n    }\r\n    .corner-bottom-left {\r\n        border-bottom-left-radius: var(--border-radius);\r\n    }\r\n    .corner-bottom-right {\r\n        border-bottom-right-radius: var(--border-radius);\r\n    }\r\n    .corner-left {\r\n        border-top-left-radius: var(--border-radius);\r\n        border-bottom-left-radius: var(--border-radius);\r\n    }\r\n    .corner-right {\r\n        border-top-right-radius: var(--border-radius);\r\n        border-bottom-right-radius: var(--border-radius);\r\n    }\r\n    .corner-bottom {\r\n        border-bottom-left-radius: var(--border-radius);\r\n        border-bottom-right-radius: var(--border-radius);\r\n    }\r\n\r\n    /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */\r\n    @keyframes breath {\r\n        0%, 100% { transform: scale(1); }\r\n        50% { transform: scale(1.02); }\r\n    }\r\n\r\n    @keyframes float {\r\n        0%, 100% { transform: translateY(1px); }\r\n        50% { transform: translateY(-1px); }\r\n    }\r\n\r\n    @keyframes tilt {\r\n        0%, 100% { transform: rotate(-2deg); }\r\n        50% { transform: rotate(2deg); }\r\n    }\r\n\r\n    @keyframes pulse {\r\n        0%, 100% { opacity: 1; }\r\n        50% { opacity: 0.96; }\r\n    }\r\n\r\n    .img-anim-breath {\r\n        animation: breath 6s ease-in-out infinite;\r\n    }\r\n\r\n    .img-anim-float {\r\n        animation: float 5s ease-in-out infinite;\r\n    }\r\n\r\n    .img-anim-tilt {\r\n        animation: tilt 7s ease-in-out infinite;\r\n    }\r\n\r\n    .img-anim-pulse {\r\n        animation: pulse 4s ease-in-out infinite;\r\n    }\r\n\r\n    /* Layout generator */\r\n    @mixin generate-collage-layout($count, $positions, $gap) {\r\n        @for $i from 1 through length($positions) {\r\n            $pos: nth($positions, $i);\r\n            $top: nth($pos, 1);\r\n            $left: nth($pos, 2);\r\n            $width: nth($pos, 3);\r\n            $height: nth($pos, 4);\r\n\r\n            .layout-#{$count}-#{$i} {\r\n                top: calc(#{$top} + #{$gap} / 2);\r\n                left: calc(#{$left} + #{$gap} / 2);\r\n                width: calc(#{$width} - #{$gap});\r\n                height: calc(#{$height} - #{$gap});\r\n            }\r\n        }\r\n    }\r\n\r\n    @include generate-collage-layout(1, (\r\n        (0%, 0%, 100%, 100%),\r\n    ), var(--gap));\r\n\r\n    @include generate-collage-layout(2, (\r\n        (0%, 0%, 50%, 100%),\r\n        (0%, 50%, 50%, 100%)\r\n    ), var(--gap));\r\n\r\n    @include generate-collage-layout(3, (\r\n        (0%, 0%, 50%, 50%),\r\n        (0%, 50%, 50%, 50%),\r\n        (50%, 0%, 100%, 50%)\r\n    ), var(--gap));\r\n\r\n    @include generate-collage-layout(4, (\r\n        (0%, 0%, 50%, 50%),\r\n        (0%, 50%, 50%, 50%),\r\n        (50%, 0%, 50%, 50%),\r\n        (50%, 50%, 50%, 50%)\r\n    ), var(--gap));\r\n\r\n    @include generate-collage-layout(5, (\r\n        (0%, 0%, 50%, 50%),\r\n        (0%, 50%, 50%, 50%),\r\n        (50%, 0%, 50%, 50%),\r\n        (50%, 50%, 50%, 50%),\r\n        (33.33%, 33.33%, 33.33%, 33.33%)\r\n    ), var(--gap));\r\n\r\n    @include generate-collage-layout(6, (\r\n        (0%, 0%, 33.33%, 50%),\r\n        (0%, 33.33%, 33.33%, 50%),\r\n        (0%, 66.66%, 33.33%, 50%),\r\n        (50%, 0%, 33.33%, 50%),\r\n        (50%, 33.33%, 33.33%, 50%),\r\n        (50%, 66.66%, 33.33%, 50%)\r\n    ), var(--gap));\r\n\r\n    @include generate-collage-layout(7, (\r\n        (0%, 0%, 33.33%, 33.33%),\r\n        (0%, 33.33%, 33.33%, 33.33%),\r\n        (0%, 66.66%, 33.33%, 33.33%),\r\n        (33.33%, 0%, 33.33%, 33.33%),\r\n        (33.33%, 33.33%, 33.33%, 33.33%),\r\n        (33.33%, 66.66%, 33.33%, 33.33%),\r\n        (66.66%, 33.33%, 33.33%, 33.33%)\r\n    ), var(--gap));\r\n\r\n    @include generate-collage-layout(8, (\r\n        (0%, 0%, 25%, 50%),\r\n        (0%, 25%, 25%, 50%),\r\n        (0%, 50%, 25%, 50%),\r\n        (0%, 75%, 25%, 50%),\r\n        (50%, 0%, 25%, 50%),\r\n        (50%, 25%, 25%, 50%),\r\n        (50%, 50%, 25%, 50%),\r\n        (50%, 75%, 25%, 50%)\r\n    ), var(--gap));\r\n\r\n\r\n    @keyframes fadeIn {\r\n        to {\r\n            opacity: 1; /* –∫–æ–Ω–µ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */\r\n        }\r\n    }\r\n\r\n    @keyframes fadeVinylIn {\r\n        to {\r\n            scale: 0.7;\r\n        }\r\n    }\r\n\r\n    .collage {\r\n        &.vinyl {\r\n            border-radius: 50%;\r\n            scale: 1;\r\n            animation: fadeVinylIn .4s ease forwards;\r\n\r\n            &:before {\r\n                box-shadow: 0px 0px 5px var(--dark-20);\r\n                content: '';\r\n                position: absolute;\r\n                inset: -22%;\r\n                opacity: 0;\r\n                animation: fadeIn .4s ease forwards;\r\n                overflow: hidden;\r\n                border-radius: 50%;\r\n                background:radial-gradient(\r\n                        circle at center,\r\n                        var(--white-500) 0%,\r\n                        var(--white-500) 50%,\r\n                        var(--gray-10) 51%,\r\n                        var(--white-500) 53%,\r\n                        var(--gray-10) 55%,\r\n                        var(--white-500) 57%,\r\n                        var(--white-500) 100%\r\n                    ),\r\n                    repeating-radial-gradient(\r\n                        circle at center,\r\n                        var(--dark-5) 0px,\r\n                        var(--dark-5) 1px,\r\n                        transparent 2px,\r\n                        transparent 6px\r\n                    );\r\n                background-blend-mode: overlay;\r\n            }\r\n            position: relative;\r\n\r\n            &:after {\r\n                content: \"\";\r\n                position: absolute;\r\n                inset: 48%;\r\n                background: var(--white-500);\r\n                border-radius: 50%;\r\n                opacity: 0;\r\n                animation: fadeIn 1s ease forwards;\r\n                animation-delay: 0.5s;\r\n            }\r\n\r\n            // .collage-item {\r\n            //     position: absolute;\r\n            //     inset: 15%;\r\n            //     width: 70%;\r\n            //     height: 70%;\r\n            //     object-fit: cover;\r\n            //     border-radius: 50%;\r\n            //     opacity: 0;\r\n            //     animation: fadeIn .8s ease forwards;\r\n            //     animation-delay: 0s;\r\n            // }\r\n        }\r\n    }\r\n</style>\r\n"],"names":[],"mappings":"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"}